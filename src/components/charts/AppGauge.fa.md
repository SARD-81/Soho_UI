# AppGauge.tsx

## نمای کلی
کامپوننت `AppGauge` یک پوشش برای کامپوننت Gauge از Material UI X است که برای ارائه استایل پیش‌فرض، تم ثابت و قابلیت‌های قالب‌بندی مقدار برای نمودارهای گیج در برنامه طراحی شده است. این کامپوننت مشکلات استایل مربوط به متن گیج پیش‌فرض را برطرف می‌کند و راهی راحت برای قالب‌بندی مقادیر نمایش داده شده فراهم می‌کند.

## ساختار فایل و اجزاء به تفصیل

### دستورات واردات
- `GlobalStyles` از '@mui/material': برای اعمال استایل‌های سراسری CSS به کامپوننت گیج استفاده می‌شود
- `Gauge` و `GaugeProps` از '@mui/x-charts/Gauge': کامپوننت گیج پایه از Material UI

### تعریف نوع (`AppGaugeProps`)
```ts
export type AppGaugeProps = GaugeProps & {
  valueFormatter?: (value: number | null) => string;
};
```
- استاندارد GaugeProps را با یک گزینه اضافی گسترش می‌دهد
- `valueFormatter`: تابع اختیاری برای سفارشی کردن نحوه نمایش مقدار گیج به عنوان متن

### تجزیه Props کامپوننت
```ts
const { valueFormatter, text, ...rest }: AppGaugeProps
```
- valueFormatter، متن و تمام props دیگر را استخراج می‌کند
- از rest برای ضبط تمام props دیگر برای ارسال به کامپوننت Gauge استفاده می‌کند

### منطق قالب‌بندی متن
```ts
const gaugeText =
  text ??
  (({ value }: { value: number | null }) => {
    if (valueFormatter) {
      return valueFormatter(value ?? null);
    }

    const numericValue = typeof value === 'number' ? value : 0;
    return `${Math.round(numericValue)}`;
  });
```
- اگر تابع متن سفارشی ارائه شده باشد، مستقیماً از آن استفاده می‌کند
- در غیر این صورت، تابعی ایجاد می‌کند که:
  - اگر ارائه شده باشد از valueFormatter سفارشی استفاده می‌کند
  - به گرد کردن و تبدیل مقدار به رشته برمی‌گردد
  - مقادیر تهی/تعریف نشده را با مقدار 0 مدیریت می‌کند

### اعمال استایل‌های سراسری
```ts
<GlobalStyles
  styles={{
    '.MuiGauge-valueText, .MuiGauge-valueText tspan': {
      fill: 'var(--color-text) !important',
      color: 'var(--color-text) !important',
    },
  }}
/>
```
- استایل‌های CSS را برای لغو رنگ متن گیج پیش‌فرض اعمال می‌کند
- از متغیرهای CSS برای تم ثابت استفاده می‌کند
- از !important برای اطمینان از اعمال استایل‌ها علی‌رغم تداخل‌های احتمالی استفاده می‌کند
- هر دو عنصر متن اصلی و فرزندان tspan آن را هدف قرار می‌دهد

### ساختار بازگشت JSX
```ts
return (
  <>
    <GlobalStyles
      // پیکربندی استایل‌ها
    />
    <Gauge {...rest} text={gaugeText} />
  </>
);
```
- یک قطعه حاوی کامپوننت‌های GlobalStyles و Gauge را برمی‌گرداند
- تابع متن قالب‌بندی شده را به گیج اعمال می‌کند
- تمام props دیگر را به کامپوننت Gauge ارسال می‌کند

## هدف و عملکرد
- کامپوننت Material UI X Gauge را با استایل پیش‌فرض پوشش می‌دهد
- یک طرح رنگ ثابت را با استفاده از متغیرهای CSS فراهم می‌کند
- از طریق ویژگی valueFormatter قابلیت‌های قالب‌بندی مقدار را ارائه می‌دهد
- اطمینان حاصل می‌کند که متن گیج از رنگ متن برنامه استفاده می‌کند
- API کامل کامپوننت گیج اصلی را حفظ می‌کند در حالی که ویژگی‌های استایل و قالب‌بندی را اضافه می‌کند

## Props
- `valueFormatter`: تابع اختیاری برای سفارشی کردن قالب‌بندی نمایش مقدار
- `text`: تابع اختیاری سفارشی برای تولید محتوای متنی (ارزش دهی نسبت به valueFormatter)
- تمام props استاندارد `GaugeProps` به کامپوننت گیج درونی منتقل می‌شوند

## ویژگی‌های کلیدی
- استایل و تم پیش‌فرض به طور خودکار اعمال می‌شود
- پشتیبانی از قالب‌بندی مقدار سفارشی
- سازگار با طرح رنگ برنامه
- سازگاری با تمام خصوصیات گیج اصلی را حفظ می‌کند
- پشتیبانی RTL از طریق تم ثابت
- تایپ‌نویسی صحیح TypeScript

## الگوهای استفاده
- هنگامی که به یک گیج با استایل پیش‌فرض برنامه نیاز دارید استفاده کنید
- تابع valueFormatter را برای سفارشی کردن نمایش مقدار ارسال کنید
- از ویژگی متن برای رندر سازی کاملاً سفارشی متن استفاده کنید
- هر props استاندارد گیج را برای داده، پیکربندی و غیره ارسال کنید